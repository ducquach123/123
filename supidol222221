repeat
    task.wait()
until game:IsLoaded()

-- ============[ Tá»I Æ¯U Äá»’ Há»ŒA - Æ¯U TIÃŠN CAO ]============
local Lighting = game:GetService('Lighting')
local RunService = game:GetService('RunService')

print('ðŸŽ¨ Báº¯t Ä‘áº§u tá»‘i Æ°u Ä‘á»“ há»a...')

-- Giáº£m quality xuá»‘ng tháº¥p nháº¥t
pcall(function()
    local rs = settings():GetService('RenderSettings')
    if rs then
        rs.QualityLevel = Enum.QualityLevel.Level01
    end
end)

-- Táº¯t cÃ¡c hiá»‡u á»©ng Lighting
pcall(function()
    Lighting.GlobalShadows = false
    Lighting.EnvironmentDiffuseScale = 0
    Lighting.EnvironmentSpecularScale = 0
    Lighting.FogEnd = 1000
    Lighting.Brightness = 1
    Lighting.ClockTime = 12
    Lighting.ShadowSoftness = 0

    -- Táº¯t cÃ¡c effect
    for _, v in ipairs(Lighting:GetChildren()) do
        if
            v:IsA('BloomEffect')
            or v:IsA('SunRaysEffect')
            or v:IsA('DepthOfFieldEffect')
            or v:IsA('BlurEffect')
            or v:IsA('ColorCorrectionEffect')
        then
            pcall(function()
                v.Enabled = false
            end)
        end
    end

    -- Táº¡o stub effects náº¿u cáº§n
    local function ensureEffect(cls, name)
        local eff = Lighting:FindFirstChild(name)
        if not eff then
            local bycls = Lighting:FindFirstChildOfClass(cls)
            if bycls then
                eff = bycls
                eff.Name = name
            else
                eff = Instance.new(cls)
                eff.Name = name
                eff.Parent = Lighting
            end
        end
        pcall(function()
            eff.Enabled = false
        end)
    end

    ensureEffect('SunRaysEffect', 'SunRays')
    ensureEffect('BloomEffect', 'Bloom')
    ensureEffect('DepthOfFieldEffect', 'DepthOfField')
    ensureEffect('BlurEffect', 'Blur')
    ensureEffect('ColorCorrectionEffect', 'ColorCorrection')
end)

-- Tá»‘i Æ°u Terrain vÃ  Workspace
pcall(function()
    local Terrain = workspace:FindFirstChildOfClass('Terrain')
    if Terrain then
        Terrain.WaterWaveSize = 0
        Terrain.WaterWaveSpeed = 0
        Terrain.WaterReflectance = 0
        Terrain.WaterTransparency = 1
    end
    workspace.StreamingEnabled = true
    workspace.LevelOfDetail = Enum.ModelLevelOfDetail.Disabled
end)

-- Tá»‘i Æ°u táº¥t cáº£ parts trong workspace (cháº¡y ngay láº­p tá»©c)
local ok, descs = pcall(workspace.GetDescendants, workspace)
if ok and type(descs) == 'table' then
    for _, inst in ipairs(descs) do
        if inst:IsA('BasePart') then
            pcall(function()
                inst.Material = Enum.Material.SmoothPlastic
                inst.CastShadow = false
                inst.Reflectance = 0
            end)
        elseif
            inst:IsA('ParticleEmitter')
            or inst:IsA('Trail')
            or inst:IsA('Fire')
            or inst:IsA('Smoke')
            or inst:IsA('Sparkles')
        then
            pcall(function()
                inst.Enabled = false
            end)
        elseif inst:IsA('Decal') or inst:IsA('Texture') then
            pcall(function()
                inst.Transparency = 1
                inst.ZIndex = 0
            end)
        elseif inst:IsA('SurfaceAppearance') then
            pcall(function()
                inst:Destroy()
            end)
        end
    end
end

print('âœ… ÄÃ£ tá»‘i Æ°u Ä‘á»“ há»a xong!')

-- ============[ Lá»šP PHá»¦ MÃ€N HÃŒNH TRáº®NG + Äá»’NG Há»’ ]============
local Players = game:GetService('Players')
local UIS = game:GetService('UserInputService')
local LP = Players.LocalPlayer

local WHITE_ON_START = true
local TOGGLE_KEY = Enum.KeyCode.P
local WhiteGui, WhiteFrame, TimerLabel, WhiteOn = nil, nil, nil, false
local startTime = tick()

local function ensureWhite()
    if WhiteGui and WhiteGui.Parent then
        return
    end

    local pg = nil
    local ok = pcall(function()
        pg = LP and LP:WaitForChild('PlayerGui', 10)
    end)
    if not ok or not pg then
        warn('[WhiteScreen] PlayerGui not found')
        return
    end

    WhiteGui = Instance.new('ScreenGui')
    WhiteGui.Name = 'WhiteOverlay'
    WhiteGui.ResetOnSpawn = false
    WhiteGui.IgnoreGuiInset = true
    WhiteGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    WhiteGui.Parent = pg

    WhiteFrame = Instance.new('Frame')
    WhiteFrame.Size = UDim2.fromScale(1, 1)
    WhiteFrame.BackgroundColor3 = Color3.new(1, 1, 1)
    WhiteFrame.BorderSizePixel = 0
    WhiteFrame.Visible = false
    WhiteFrame.Parent = WhiteGui

    -- Äá»“ng há»“ Ä‘áº¿m giÃ¢y á»Ÿ giá»¯a mÃ n hÃ¬nh
    TimerLabel = Instance.new('TextLabel')
    TimerLabel.Size = UDim2.new(0, 300, 0, 100)
    TimerLabel.Position = UDim2.fromScale(0.5, 0.5)
    TimerLabel.AnchorPoint = Vector2.new(0.5, 0.5)
    TimerLabel.BackgroundTransparency = 1
    TimerLabel.Text = '00:00:00'
    TimerLabel.TextColor3 = Color3.new(0, 0, 0)
    TimerLabel.TextSize = 48
    TimerLabel.Font = Enum.Font.GothamBold
    TimerLabel.TextStrokeTransparency = 0.8
    TimerLabel.Parent = WhiteFrame
end

local function setWhite(b)
    if not (WhiteGui and WhiteGui.Parent) then
        ensureWhite()
    end
    if not (WhiteGui and WhiteGui.Parent) then
        return
    end
    WhiteOn = b and true or false
    if WhiteFrame then
        WhiteFrame.Visible = WhiteOn
    end
    print(WhiteOn and 'â¬œ White screen: ON' or 'â¬› White screen: OFF')
end

-- Toggle báº±ng phÃ­m P
pcall(function()
    UIS.InputBegan:Connect(function(input, gpe)
        if gpe then
            return
        end
        if input.KeyCode == TOGGLE_KEY then
            setWhite(not WhiteOn)
        end
    end)
end)

if WHITE_ON_START then
    setWhite(true)
end

-- Cáº­p nháº­t Ä‘á»“ng há»“ má»—i frame
task.spawn(function()
    RunService.RenderStepped:Connect(function()
        if TimerLabel then
            local elapsed = tick() - startTime
            local hours = math.floor(elapsed / 3600)
            local minutes = math.floor((elapsed % 3600) / 60)
            local seconds = math.floor(elapsed % 60)
            TimerLabel.Text =
                string.format('%02d:%02d:%02d', hours, minutes, seconds)
        end
    end)
end)

-- ============[ áº¨N Báº¢NG Lá»–I TELEPORT - NÃ‚NG CAO ]============
task.spawn(function()
    while task.wait(0.1) do -- Check nhanh hÆ¡n: 0.1s
        pcall(function()
            local pg = LP:FindFirstChild('PlayerGui')
            if pg then
                for _, gui in ipairs(pg:GetChildren()) do
                    if gui:IsA('ScreenGui') and gui.Enabled then
                        -- TÃ¬m vÃ  áº©n táº¥t cáº£ popup/dialog
                        for _, frame in ipairs(gui:GetDescendants()) do
                            if
                                frame:IsA('Frame') or frame:IsA('ImageLabel')
                            then
                                -- Check cÃ¡c text label bÃªn trong
                                for _, textObj in ipairs(frame:GetDescendants()) do
                                    if
                                        textObj:IsA('TextLabel')
                                        or textObj:IsA('TextButton')
                                    then
                                        local text =
                                            string.lower(textObj.Text or '')

                                        -- Danh sÃ¡ch tá»« khÃ³a lá»—i
                                        local errorKeywords = {
                                            '772',
                                        }

                                        local isError = false
                                        for _, keyword in ipairs(errorKeywords) do
                                            if text:find(keyword) then
                                                isError = true
                                                break
                                            end
                                        end

                                        if isError then
                                            -- áº¨n frame cha chá»©a lá»—i
                                            frame.Visible = false
                                            -- Hoáº·c áº©n cáº£ GUI
                                            gui.Enabled = false
                                            print(
                                                'ðŸš« ÄÃ£ áº©n báº£ng lá»—i:',
                                                textObj.Text
                                            )

                                            -- Tá»± Ä‘á»™ng click nÃºt OK/Close náº¿u cÃ³
                                            for _, btn in
                                                ipairs(frame:GetDescendants())
                                            do
                                                if btn:IsA('TextButton') then
                                                    local btnText =
                                                        string.lower(
                                                            btn.Text or ''
                                                        )
                                                    if
                                                        btnText:find('ok')
                                                        or btnText:find(
                                                            'Ä‘Ã³ng'
                                                        )
                                                        or btnText:find('close')
                                                    then
                                                        pcall(function()
                                                            for _, connection in
                                                                pairs(
                                                                    getconnections(
                                                                        btn.MouseButton1Click
                                                                    )
                                                                )
                                                            do
                                                                connection:Fire()
                                                            end
                                                        end)
                                                    end
                                                end
                                            end
                                            break
                                        end
                                    end
                                end
                            end
                        end
                    end
                end

                -- áº¨n luÃ´n CoreGui náº¿u cÃ³
                pcall(function()
                    local coreGui = game:GetService('CoreGui')
                    for _, gui in ipairs(coreGui:GetChildren()) do
                        if gui:IsA('ScreenGui') then
                            for _, desc in ipairs(gui:GetDescendants()) do
                                if desc:IsA('TextLabel') then
                                    local text = string.lower(desc.Text or '')
                                    if
                                        text:find('772')
                                    then
                                        gui.Enabled = false
                                    end
                                end
                            end
                        end
                    end
                end)
            end
        end)
    end
end)

-- Delay 1s sau khi hoÃ n thÃ nh tá»‘i Æ°u
task.wait(1)

-- ============[ SCRIPT Gá»C ]============

-- ðŸŽ¯ Danh sÃ¡ch target
local targets = {
    'Strawberry Elephant',
    'Graipuss Medussi',
    'To to to Sahur',
    'Pot Hotspot',
    'Chicleteira Bicicleteira',
    'Los Chicleteiras',
    'La Grande Combinasion',
    'Nuclearo Dinossauro',
    'Esok Sekolah',
    'Ketupat Kepat',
    'Money Money Puggy',
    'Tictac Sahur',
    'Ketchuru and Musturu',
    'Garama and Madundung',
    'Spaghetti Tualetti',
    'Dragon Cannelloni',
    '67',
    'Mariachi Corazoni',
    'Tacorita Bicicleta',
    'La Extinct Grande',
    'Quesadilla Crocodila',
    'Los Nooo My Hotspotsitos',
    'Las Sis',
    'Celularcini Viciosini',
    'Los Bros',
    'Tralaledon',
    'Los Tacoritas',
    'Los Primos',
    'La Sahur Combinasion',
    'Los Combinasionas',
    'Los Hotspotsitos',
    'La Supreme Combinasion',
    'Los 67',
    'La Secret Combinasion',
    'Burguro And Fryuro',
    'La Spooky Grande',
    'Los Mobilis',
    'Eviledon',
    'Spooky and Pumpky',
}

-- ðŸŒ Webhook
local HttpService = game:GetService('HttpService')
local TeleportService = game:GetService('TeleportService')
local url =
    'https://discord.com/api/webhooks/1422467802744356955/MtviPDZEJ2mnRUkErjusdNheW3exDBVGPCg-1AXvmHjnai17llKqA1NMTeKwetjSp05k'

-- ðŸ” Check target vá»›i Stolen vÃ  CRAFTING filter
local function checkTargets()
    local foundTargets = {}
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA('TextLabel') and obj.Name == 'DisplayName' then
            local txt = string.lower(obj.LocalizedText or '')

            -- Bá» qua náº¿u lÃ  CRAFTING
            if string.upper(obj.LocalizedText or '') == 'FUSING' then
                continue
            end

            for _, name in ipairs(targets) do
                if string.find(txt, string.lower(name)) then
                    if not table.find(foundTargets, name) then
                        -- TÃ¬m Stolen trong cÃ¹ng thÆ° má»¥c vá»›i DisplayName
                        local parent = obj.Parent
                        local isStolen = false

                        if parent then
                            local stolenLabel = parent:FindFirstChild('Stolen')
                            if stolenLabel and stolenLabel:IsA('TextLabel') then
                                local stolenText = string.upper(
                                    stolenLabel.LocalizedText or ''
                                )
                                if stolenText == 'FUSING' then
                                    isStolen = true
                                end
                            end
                        end

                        -- Chá»‰ thÃªm vÃ o list náº¿u KHÃ”NG bá»‹ stolen (khÃ´ng cÃ³ FUSING)
                        if not isStolen then
                            table.insert(foundTargets, name)
                            print('âœ… Found valid target:', name)
                        else
                            print('âš ï¸ Skipped (FUSING):', name)
                        end
                    end
                end
            end
        end
    end
    return #foundTargets > 0, foundTargets
end

-- ðŸ“¤ Gá»­i webhook
local lastJobIdSent = nil
local function sendWebhook(foundTargets)
    local placeId = game.PlaceId
    local jobId = game.JobId
    if jobId == lastJobIdSent then
        return
    end
    lastJobIdSent = jobId

    local joinScript = "game:GetService('TeleportService'):TeleportToPlaceInstance("
        .. placeId
        .. ", '"
        .. jobId
        .. "', game.Players.LocalPlayer)"
    local joinLink = 'https://chillihub1.github.io/chillihub-joiner/?placeId='
        .. placeId
        .. '&gameInstanceId='
        .. jobId

    local payload = {
        ['embeds'] = {
            {
                ['title'] = 'ðŸŽ¯ Target Detected!',
                ['description'] = 'âœ… ' .. table.concat(foundTargets, ', '),
                ['color'] = 0x00FF00,
                ['fields'] = {
                    {
                        ['name'] = 'ðŸ‘¥ Players',
                        ['value'] = tostring(#Players:GetPlayers())
                            .. ' / '
                            .. tostring(Players.MaxPlayers),
                        ['inline'] = true,
                    },
                    {
                        ['name'] = 'ðŸ†” JobId',
                        ['value'] = '`' .. jobId .. '`',
                        ['inline'] = false,
                    },
                    {
                        ['name'] = 'ðŸŒ Join Link',
                        ['value'] = '[Join Server](' .. joinLink .. ')',
                        ['inline'] = false,
                    },
                    {
                        ['name'] = 'ðŸ“œ Join Script',
                        ['value'] = '```lua\n' .. joinScript .. '\n```',
                        ['inline'] = false,
                    },
                },
                ['footer'] = {
                    ['text'] = 'Spyder Scanner | User: '
                        .. Players.LocalPlayer.Name,
                },
                ['timestamp'] = DateTime.now():ToIsoDate(),
            },
        },
    }

    pcall(function()
        http_request({
            Url = url,
            Method = 'POST',
            Headers = { ['Content-Type'] = 'application/json' },
            Body = HttpService:JSONEncode(payload),
        })
    end)
    print('âœ… Gá»­i webhook:', table.concat(foundTargets, ', '))
end

pcall(function()
    local TeleportService = game:GetService('TeleportService')
    local HttpService = game:GetService('HttpService')
    local Players = game:GetService('Players')

    local PlaceID = game.PlaceId
    local foundAnything = ''
    local AllIDs = {}
    local actualHour = os.date('!*t').hour

    -- ðŸ“‚ File lÆ°u server hop
    local fileName = 'ServerED.json'

    local success, result = pcall(function()
        return HttpService:JSONDecode(readfile(fileName))
    end)
    if success and type(result) == 'table' then
        AllIDs = result
    else
        AllIDs = { actualHour }
        pcall(function()
            writefile(fileName, HttpService:JSONEncode(AllIDs))
        end)
    end

    -- ðŸ§© HÃ m láº¥y danh sÃ¡ch server
    local function ListServers(cursor)
        task.wait(math.random(2, 12))
        local url = 'https://games.roblox.com/v1/games/'
            .. PlaceID
            .. '/servers/Public?sortOrder=Asc&limit=100'
        if cursor then
            url = url .. '&cursor=' .. cursor
        end
        local ok, body = pcall(function()
            return game:HttpGet(url)
        end)
        if ok and body then
            local decoded = HttpService:JSONDecode(body)
            if decoded and decoded.data then
                return decoded
            end
        end
        return { data = {} }
    end

    -- ðŸ•¹ï¸ HÃ m teleport (gá»­i webhook náº¿u tháº¥y target)
    local function TPReturner()
        -- ðŸ” Kiá»ƒm tra target trong server hiá»‡n táº¡i
        local ok, foundTargets = checkTargets()
        if ok and #foundTargets > 0 then
            print(
                'ðŸŽ¯ PhÃ¡t hiá»‡n target -> gá»­i webhook vÃ  tiáº¿p tá»¥c hop...'
            )
            sendWebhook(foundTargets)
        end

        -- ðŸŒ€ Tiáº¿p tá»¥c tÃ¬m server má»›i
        local servers = ListServers(foundAnything)
        if servers.nextPageCursor then
            foundAnything = servers.nextPageCursor
        end

        for _, v in ipairs(servers.data) do
            local id = tostring(v.id)
            if v.playing < v.maxPlayers and id ~= game.JobId then
                -- Reset má»—i giá»
                if AllIDs[1] ~= actualHour then
                    AllIDs = { actualHour }
                end

                if not table.find(AllIDs, id) then
                    table.insert(AllIDs, id)
                    pcall(function()
                        writefile(fileName, HttpService:JSONEncode(AllIDs))
                    end)

                    print(
                        'ðŸ”„ Teleporting tá»›i server:',
                        id,
                        ' | ' .. v.playing .. '/' .. v.maxPlayers
                    )
                    TeleportService:TeleportToPlaceInstance(
                        PlaceID,
                        id,
                        Players.LocalPlayer
                    )
                    task.wait(0.11111111)
                    return
                end
            end
        end
    end

    -- ðŸŒ€ VÃ²ng láº·p server hop liÃªn tá»¥c
    while task.wait(1) do
        pcall(TPReturner)
    end
end)
